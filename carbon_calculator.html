<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Carbon Footprint Calculator</title>
  <!-- css -->
</head>
<body>
<div class="container">
     <!-- Result Section -->
    <div id="result">
        <h3>Your estimated annual carbon emissions are:</h3>
        <div id="resultContent"></div>
    </div>

    <h1>Carbon Footprint Calculator</h1>

    <!-- Progress Bar with Steps -->
    <div class="progress-bar-container">
        <div class="progress-steps" id="progressSteps">
            <!-- Steps will be dynamically added by JavaScript -->
        </div>
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <div class="question-container"> <!-- Steps will be dynamically added by JavaScript -->
        <div class="question active">
            <label for="electricity">Enter your average monthly electricity consumption in kWh:</label>
            <input type="range" id="electricity" name="electricity" min="0" max="5000" value="0" step="1" oninput="updateElectricityLabel(this.value)">
            <label id="electricityLabel2">0 (Zero)kWh - Very large kWh</label>
            <label id="electricityLabel">0kWh</label>

            <div class="button-container">

                <div></div> <!-- Empty div to align the Next button to the left -->
                <button onclick="nextQuestion()">Next</button>


            </div>
        </div>

        <div class="question">
            <label id="householdSize">How many people live in your household?</label>
            <div class="options">
                <button onclick="selectHouseholdSize(1, event)">A. Just me</button>
                <button onclick="selectHouseholdSize(2, event)">B. 1-2</button>
                <button onclick="selectHouseholdSize(3, event)">C. 2-3</button>
                <button onclick="selectHouseholdSize(4, event)">D. 3-4</button>
                <button onclick="selectHouseholdSize(5, event)">E. 4-5</button>
                <button onclick="selectHouseholdSize(6, event)">F. 5 or more</button>
            </div>
            <div >

            </div>
            <div>
                <button onclick="previousQuestion()">Back</button>
                <button onclick="nextQuestion()">Next</button>
            </div>
        </div>

        <div class="question">
            <label id="publicTransport">How often do you use public transport per week?</label>
            <div class="options">
                <button onclick="selectPublicTransport(1, event)">A. Never</button>
                <button onclick="selectPublicTransport(2, event)">B. 1-2 times</button>
                <button onclick="selectPublicTransport(3, event)">C. 3-4 times</button>
                <button onclick="selectPublicTransport(4, event)">D. 4-5 times</button>
                <button onclick="selectPublicTransport(5, event)">E. 6-7 times</button>
                <button onclick="selectPublicTransport(6, event)">F. 8 or more</button>
            </div>
            <div class="button-container">
                <button onclick="previousQuestion()">Back</button>
                <button onclick="nextQuestion()">Next</button>
            </div>
        </div>

        <div class="question">
            <label for="travelDistance">How far do you travel by car or motorcycle each year?</label>
            <input type="range" id="travelDistance" name="travelDistance" min="0" max="100000" value="0" step="1" oninput="updateSliderLabel(this.value)">
            <label id="sliderLabel2">0 (Zero) - Very far</label>
            <label id="sliderLabel">0Km</label>

            <div class="button-container">
                <button onclick="previousQuestion()">Back</button>
                <button onclick="nextQuestion()">Next</button>

            </div>


        </div>

        <div class="question">
            <label>Enter the number of short flights (&lt;3 hours) you take per year:</label>
            <div class="options">
                <button onclick="selectShortFlights(1, event)">A. No short flights</button>
                <button onclick="selectShortFlights(2, event)">B. 1-2</button>
                <button onclick="selectShortFlights(3, event)">C. 2-3</button>
                <button onclick="selectShortFlights(4, event)">D. 3-5</button>
                <button onclick="selectShortFlights(5, event)">E. 5-10</button>
                <button onclick="selectShortFlights(6, event)">F. 10 or more</button>
            </div>
            <div class="button-container">
                <button onclick="previousQuestion()">Back</button>
                <button onclick="nextQuestion()">Next</button>
            </div>
        </div>

        <div class="question">
            <label>Enter the number of long flights (&gt;3 hours) you take per year:</label>
            <div class="options">
                <button onclick="selectLongFlights(1, event)">A. No long flights</button>
                <button onclick="selectLongFlights(2, event)">B. 1-2</button>
                <button onclick="selectLongFlights(3, event)">C. 2-3</button>
                <button onclick="selectLongFlights(4, event)">D. 3-5</button>
                <button onclick="selectLongFlights(5, event)">E. 5-10</button>
                <button onclick="selectLongFlights(6, event)">F. 10 or more</button>
            </div>
            <div class="button-container">
                <button onclick="previousQuestion()">Back</button>
                <button onclick="nextQuestion()">Next</button>
            </div>
        </div>

        <div class="question">
            <label>Which statement is most accurate for your diet?</label>
            <div class="options">
                <button onclick="selectDiet(1, event)">A. I follow a vegan diet.</button>
                <button onclick="selectDiet(2, event)">B. I am vegetarian.</button>
                <button onclick="selectDiet(3, event)">C. I eat meat occasionally.</button>
                <button onclick="selectDiet(4, event)">D. I eat meat frequently.</button>
            </div>
            <div class="button-container">
                <button onclick="previousQuestion()">Back</button>
                <button onclick="nextQuestion()">Next</button>
            </div>
        </div>

        <div class="question">
            <label>How large is your home?</label>
            <div class="options">
                <button onclick="selectHomeSize(1, event)">A. 1 bedroom</button>
                <button onclick="selectHomeSize(2, event)">B. 2 bedrooms</button>
                <button onclick="selectHomeSize(3, event)">C. 3 bedrooms</button>
                <button onclick="selectHomeSize(4, event)">D. 4 bedrooms</button>
                <button onclick="selectHomeSize(5, event)">E. 5+ bedrooms</button>
            </div>
            <div class="button-container">
                <button onclick="previousQuestion()">Back</button>
                <button onclick="nextQuestion()">Next</button>
            </div>
        </div>

        <div class="question">
            <label>What type of heating system do you use?</label>
            <div class="options">
                <button onclick="selectHeatingSystem(1, event)">A. Don't know</button>
                <button onclick="selectHeatingSystem(2, event)">B. Natural gas</button>
                <button onclick="selectHeatingSystem(3, event)">C. Heating oil</button>
                <button onclick="selectHeatingSystem(4, event)">D. Heat pump system</button>
                <button onclick="selectHeatingSystem(5, event)">E. District heating</button>
                <button onclick="selectHeatingSystem(6, event)">F. Biomass</button>
                <button onclick="selectHeatingSystem(7, event)">G. Electric heating</button>
                <button onclick="selectHeatingSystem(8, event)">H. Solar power heating</button>
            </div>
            <div class="button-container">
                <button onclick="previousQuestion()">Back</button>
                <button onclick="nextQuestion()">Next</button>

            </div>
        </div>

        <div class="question">
            <label>Which statement is most accurate for your clothing expenses?</label>
            <div class="options">
                <button onclick="selectClothingExpenses(1, event)">A. I purchase new clothing, devices, and furniture very rarely (60 euros a month).</button>
                <button onclick="selectClothingExpenses(2, event)">B. I purchase half of my clothing, devices, and furniture second-hand (170 euros a month).</button>
                <button onclick="selectClothingExpenses(3, event)">C. I occasionally purchase new clothing, devices, and furniture (210 euros a month).</button>
                <button onclick="selectClothingExpenses(4, event)">D. I frequently purchase new clothing, devices, and furniture (420 euros a month).</button>
            </div>
            <div class=button-container">
                <button onclick="previousQuestion()">Back</button>
                <a href="carbon_calculator_results.html"><button>Done</button></a>

            </div>

           <!-- <div class="button-container"><a href="carbon_calculator_results.html"><button>Done</button></a></div>-->



        </div>
    </div>





</div>

<script>
    let currentQuestionIndex = 0;
    let homeSize = 1;
    let diet = 1;
    let clothingExpenses = 1;
    let heatingSystem = 1;
    let shortFlights = 1;
    let longFlights = 1;
    let travelDistance = 0;
    let householdSize = 1;
    let publicTransport = 1;

    document.addEventListener('DOMContentLoaded', () => {
        initializeProgressSteps();
        updateProgressBar();
    });

    function initializeProgressSteps() {
        const questions = document.querySelectorAll('.question');
        const progressStepsContainer = document.getElementById('progressSteps');

        questions.forEach((_, index) => {
            const step = document.createElement('div');
            step.className = 'progress-step';
            step.textContent = index + 1;
            step.onclick = () => changeQuestion(index);
            if (index === 0) {
                step.classList.add('active');
            }
            progressStepsContainer.appendChild(step);
        });
    }

    function nextQuestion() {
        changeQuestion(currentQuestionIndex + 1);
    }

    function previousQuestion() {
        changeQuestion(currentQuestionIndex - 1);
    }

    function changeQuestion(newIndex) {
        const questions = document.querySelectorAll('.question');
        const resultSection = document.getElementById('result');

        if (newIndex >= 0 && newIndex < questions.length) {
            const currentQuestion = questions[currentQuestionIndex];
            const newQuestion = questions[newIndex];

            currentQuestion.classList.remove('active');
            newQuestion.classList.add('active');
            resultSection.style.display = 'none';

            currentQuestionIndex = newIndex;
            updateProgressBar();
        }
    }

    function updateSliderLabel(value) {
        const label = document.getElementById('sliderLabel');
        label.textContent = `${value} km per year`;
    }

    function updateElectricityLabel(value) {
        const label = document.getElementById('electricityLabel');
        label.textContent = `${value} kWh`;
    }

    function selectDiet(selectedDiet, event) {
        document.querySelectorAll('.options button').forEach(button => button.classList.remove('selected'));
        event.target.classList.add('selected');
        diet = selectedDiet;
    }

    function selectHomeSize(size, event) {
        document.querySelectorAll('.options button').forEach(button => button.classList.remove('selected'));
        event.target.classList.add('selected');
        homeSize = size;
    }

    function selectHeatingSystem(system, event) {
        document.querySelectorAll('.options button').forEach(button => button.classList.remove('selected'));
        event.target.classList.add('selected');
        heatingSystem = system;
    }

    function selectClothingExpenses(expenses, event) {
        document.querySelectorAll('.options button').forEach(button => button.classList.remove('selected'));
        event.target.classList.add('selected');
        clothingExpenses = expenses;
    }

    function selectShortFlights(flights, event) {
        document.querySelectorAll('.options button').forEach(button => button.classList.remove('selected'));
        event.target.classList.add('selected');
        shortFlights = flights;
    }

    function selectLongFlights(flights, event) {
        document.querySelectorAll('.options button').forEach(button => button.classList.remove('selected'));
        event.target.classList.add('selected');
        longFlights = flights;
    }

    function selectHouseholdSize(size, event) {
        document.querySelectorAll('.options button').forEach(button => button.classList.remove('selected'));
        event.target.classList.add('selected');
        householdSize = size;
    }

    function selectPublicTransport(option, event) {
        document.querySelectorAll('.question:nth-of-type(3) .options button').forEach(button => button.classList.remove('selected'));
        event.target.classList.add('selected');
        publicTransport = option;
    }

    function showResult() {
        calculateCarbonFootprint();
        document.querySelectorAll('.question').forEach(q => q.classList.remove('active'));
        document.getElementById('result').style.display = 'block';
        updateProgressBar();
    }

    function updateProgressBar() {
        const questions = document.querySelectorAll('.question');
        const progressPercentage = ((currentQuestionIndex + 1) / questions.length) * 100;
        document.getElementById('progressBar').style.width = progressPercentage + '%';

        const steps = document.querySelectorAll('.progress-step');
        steps.forEach((step, index) => {
            if (index <= currentQuestionIndex) {
                step.classList.add('active');
            } else {
                step.classList.remove('active');
            }
        });
    }

    function calculateCarbonFootprint() {
        const electricity = parseFloat(document.getElementById("electricity").value) || 0;
        travelDistance = parseFloat(document.getElementById("travelDistance").value) || 0;

        const EMISSION_FACTORS = {
            diet: {"1": 500, "2": 1000, "3": 2000, "4": 3000},
            clothing: {"1": 720, "2": 2040, "3": 2520, "4": 5040},
            electricity: 0.92,
            car: 8.887,
            short_flight: {"1": 0, "2": 500, "3": 750, "4": 1000, "5": 1500, "6": 2500},
            long_flight: {"1": 0, "2": 1100, "3": 2200, "4": 3300, "5": 5500, "6": 11000},
            home_size: {"1": 500, "2": 1000, "3": 1500, "4": 2000, "5": 2500}
        };

        const electricityEmissions = electricity * EMISSION_FACTORS.electricity * 12;
        const carEmissions = travelDistance * EMISSION_FACTORS.car / 1000;
        const flightEmissions = EMISSION_FACTORS.short_flight[shortFlights] + EMISSION_FACTORS.long_flight[longFlights];
        const dietEmissions = diet ? EMISSION_FACTORS.diet[diet] : 0;
        const clothingEmissions = clothingExpenses ? EMISSION_FACTORS.clothing[clothingExpenses] *12: 0;
        const homeSizeEmissions = homeSize ? EMISSION_FACTORS.home_size[homeSize] : 0;

        const totalEmissionsKg = electricityEmissions + carEmissions + flightEmissions + dietEmissions + clothingEmissions + homeSizeEmissions;
        const totalEmissionsTons = totalEmissionsKg / 1000;

        document.getElementById("resultContent").innerHTML = `
            <p>Diet: ${(dietEmissions / 1000).toFixed(2)} tons CO2</p>
            <p>Clothing and Household Expenses: ${(clothingEmissions / 1000).toFixed(2)} tons CO2</p>
            <p>Electricity: ${(electricityEmissions / 1000).toFixed(2)} tons CO2</p>
            <p>Car Travel: ${(carEmissions / 1000).toFixed(2)} tons CO2</p>
            <p>Flights: ${(flightEmissions / 1000).toFixed(2)} tons CO2</p>
            <p>Home Size: ${(homeSizeEmissions / 1000).toFixed(2)} tons CO2</p>
            <h4>Total Annual Emissions: ${totalEmissionsTons.toFixed(2)} tons CO2</h4>
        `;
    }
</script>
</body>
</html>
